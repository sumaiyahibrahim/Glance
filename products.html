<!DOCTYPE html>
<html>
    
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width-device-width, initial-scale=1.0">
        <title>All Products - Glance</title>
        <link rel="stylesheet" href="style.css">
        <link rel="preconnect" href="https://fonts.gstatic.com">
        <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@200;300;400;500;600;700&display=swap" rel="stylesheet">
        <!--added a cdn link by searching font awesome4 cdn and getting this link from https://www.bootstrapcdn.com/fontawesome/ this url*/-->
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
        <link rel="stylesheet" href="chatbot.css">
        <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
        <script src="chatbot.js" defer></script>
        <style>
            .chatbot-container {
                position: fixed;
                bottom: 20px;
                right: 20px;
                width: 60px;
                height: 60px;
                background-color: #007bff;
                border-radius: 50%;
                box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);
                display: flex;
                justify-content: center;
                align-items: center;
                cursor: pointer;
                transition: width 0.3s, height 0.3s;
            }
            .chatbot-container:hover {
                width: 350px;
                height: 500px;
                border-radius: 10px;
                flex-direction: column;
                overflow: hidden;
            }
            .chatbot-header {
                background-color: #007bff;
                color: #fff;
                padding: 15px;
                text-align: center;
                font-weight: bold;
                display: flex;
                justify-content: space-between;
                align-items: center;
                width: 100%;
            }
            .chatbot-header img {
                width: 30px;
                height: 30px;
                margin-right: 10px;
            }
            .chatbot-messages {
                flex: 1;
                padding: 10px;
                overflow-y: auto;
                background-color: #fff;
                width: 100%;
            }
            .chatbot-input {
                display: flex;
                border-top: 1px solid #ccc;
                width: 100%;
            }
            .chatbot-input input {
                flex: 1;
                padding: 10px;
                border: none;
                outline: none;
                font-size: 14px;
            }
            .chatbot-input button {
                padding: 10px;
                background-color: #007bff;
                color: #fff;
                border: none;
                cursor: pointer;
                font-size: 14px;
            }
            .user-message, .bot-message {
                margin: 5px 0;
                padding: 10px;
                border-radius: 5px;
            }
            .user-message {
                background-color: #007bff;
                color: #fff;
                align-self: flex-end;
            }
            .bot-message {
                background-color: #e9e9e9;
                color: #333;
                align-self: flex-start;
            }
        </style>
    </head>
    <body>
        <!--<div class ="header">-->
        <div class="container">
            <div class="navbar">
                <div class="logo">
                    <a href="index.html"><img src="images/logo.png" width="125px"></a>
                </div>
               <nav>
                    <ul id="MenuItems">
                        <li><a href="index.html">Home</a></li>
                         <li><a href="products.html">Products</a></li>
                         <li><a href="">About</a></li>
                         <li><a href="">Contact</a></li>
                         <li><a href="account.html">Account</a></li>

                    </ul>
                </nav>
                <!-- Remove cart -->
                <!-- <a href="cart.html"><img src="images/cart.png" width="30px" height="30px"></a> -->
                <img src="images/menu.png" class="menu-icon" onClick="menutoggle()" >
            </div>
           
        </div>
    <!--</div>-->
    
        <div class="small-container">
            <div class="row row-2">
                <h2>All Products</h2>
                <select onchange="filterProducts()">
                    <option>Default sorting</option>
                    <option>Short by price</option>
                    <option>Short by popularity</option>
                    <option>Short by rating</option>
                    <option>Short by sale</option>
                </select>
            </div>
            
            <div class="row">
                <div class="col-4">
                    <img src="images/product-11.jpg" onclick="addToCart('p1', 'Downshifter Sports Shoes', 3750, 'images/product-11.jpg')">
                    <h4>Downshifter Sports Shoes</h4>
                    <div class="rating">
                        <i class="fa fa-star"></i>
                        <i class="fa fa-star"></i>
                        <i class="fa fa-star"></i>
                        <i class="fa fa-star-half-o"></i>
                        <i class="fa fa-star-o"></i>
                    </div>
                    <p>₹3,750.00</p>
                </div>
                <div class="col-4">
                    <img src="images/product-2.jpg" onclick="addToCart('p2', 'Lace-Up Running Shoes', 2625, 'images/product-2.jpg')">
                    <h4>Lace-Up Running Shoes</h4>
                    <div class="rating">
                        <i class="fa fa-star"></i>
                        <i class="fa fa-star"></i>
                        <i class="fa fa-star"></i>
                        <i class="fa fa-star"></i>
                        <i class="fa fa-star-half-o"></i>
                    </div>
                    <p>₹2,625.00</p>
                </div>
                <div class="col-4">
                    <img src="images/product-3.jpg" onclick="addToCart('p3', 'Lace Fastening Shoes', 1125, 'images/product-3.jpg')">
                    <h4>Lace Fastening Shoes</h4>
                    <div class="rating">
                        <i class="fa fa-star"></i>
                        <i class="fa fa-star"></i>
                        <i class="fa fa-star"></i>
                        <i class="fa fa-star"></i>
                        <i class="fa fa-star-o"></i>
                    </div>
                    <p>₹1,125.00</p>
                </div>
                <div class="col-4">
                    <img src="images/product-10.jpg" onclick="addToCart('p4', 'Flat Lace-Fastening Shoes', 3750, 'images/product-10.jpg')">
                    <h4>Flat Lace-Fastening Shoes</h4>
                    <div class="rating">
                        <i class="fa fa-star"></i>
                        <i class="fa fa-star"></i>
                        <i class="fa fa-star"></i>
                        <i class="fa fa-star-o"></i>
                        <i class="fa fa-star-o"></i>
                    </div>
                    <p>₹3,750.00</p>
                </div>
            </div>
        </div>
        <div id="chatbot" class="chatbot-container">
            <div id="chatbot-header" class="chatbot-header">
                <img src="images/chatbot-logo.png" alt="Chatbot Logo" class="chatbot-logo" style="width: 30px; height: 30px; margin-right: 10px;">
                <span>Chat with us!</span>
                <button id="close-chatbot" class="chatbot-close">&times;</button>
            </div>
            <div id="chatbot-messages" class="chatbot-messages"></div>
            <div class="chatbot-input">
                <input type="text" id="chatbot-input" placeholder="Type a message...">
                <button id="send-chatbot">Send</button>
            </div>
        </div>
        <script>
            var menuItems = document.getElementById("MenuItems");
            MenuItems.style.maxHeight = "0px";
            function menutoggle() {
                if (MenuItems.style.maxHeight == "0px") {
                    MenuItems.style.maxHeight = "200px";
                } else {
                    MenuItems.style.maxHeight = "0px";
                }
            }

            document.getElementById('close-chatbot').addEventListener('click', function() {
                document.getElementById('chatbot').style.display = 'none';
            });

            document.getElementById('send-chatbot').addEventListener('click', function() {
                var input = document.getElementById('chatbot-input').value;
                var messages = document.getElementById('chatbot-messages');
                var userMessage = document.createElement('div');
                userMessage.className = 'user-message';
                userMessage.textContent = input;
                messages.appendChild(userMessage);
                document.getElementById('chatbot-input').value = '';

                // Send user message to Flask backend
                axios.post('/chatbot', { message: input })
                    .then(function(response) {
                        var botMessage = document.createElement('div');
                        botMessage.className = 'bot-message';
                        botMessage.textContent = response.data.reply;
                        messages.appendChild(botMessage);
                    })
                    .catch(function(error) {
                        var botMessage = document.createElement('div');
                        botMessage.className = 'bot-message';
                        botMessage.textContent = 'Sorry, I could not understand that.';
                        messages.appendChild(botMessage);
                    });
            });

            function generateResponse(input) {
                // Predefined responses for common questions
                if (input.toLowerCase().includes('price')) {
                    return 'The price of our products ranges from ₹1,245 to ₹4,150.';
                } else if (input.toLowerCase().includes('shipping')) {
                    return 'We offer free shipping on orders over ₹2,000.';
                } else if (input.toLowerCase().includes('return policy')) {
                    return 'You can return any product within 30 days of purchase.';
                } else if (input.toLowerCase().includes('contact')) {
                    return 'You can contact us at support@glance.com or call us at 1800-123-456.';
                } else if (input.toLowerCase().includes('discount')) {
                    return 'We have seasonal discounts. Please check our homepage for current offers.';
                } else if (input.toLowerCase().includes('store hours')) {
                    return 'Our store is open from 9 AM to 9 PM, Monday to Saturday.';
                } else if (input.toLowerCase().includes('location')) {
                    return 'We are located at 123 Main Street, Anytown, USA.';
                } else if (input.toLowerCase().includes('payment methods')) {
                    return 'We accept credit cards, debit cards, and PayPal.';
                } else if (input.toLowerCase().includes('warranty')) {
                    return 'Our products come with a 1-year warranty.';
                } else if (input.toLowerCase().includes('support')) {
                    return 'You can reach our support team at support@glance.com.';
                } else {
                    return 'Sorry, I could not understand that. Please ask about our products, prices, shipping, return policy, contact information, discounts, store hours, location, payment methods, warranty, or support.';
                }
            }

            // Greet the user when the chatbot is opened
            document.querySelector('.chatbot-container').addEventListener('mouseover', function() {
                var messages = document.getElementById('chatbot-messages');
                if (messages.childElementCount === 0) {
                    var greetingMessage = document.createElement('div');
                    greetingMessage.className = 'bot-message';
                    greetingMessage.textContent = 'Hello! How can I assist you today?';
                    messages.appendChild(greetingMessage);
                }
            });
        </script>
        <script src="script.js"></script>
    </body>
</html>
